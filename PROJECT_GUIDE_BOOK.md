# ๐ ูุชุงุจ: ุงููุฑุฌุน ุงูุดุงูู ูุจูุงุก ููุตุฉ ุงูุฌูุนูุฉ ุงูุนูููุฉ (CSA Portal)

ูุฐุง ุงูุฏููู ูู ูุฑุฌุนู ุงูุชููู ุงููุงูู ูุจูุงุก ุชุทุจูู "CSA Portal" ูู ุงูุตูุฑ ุญุชู ูุฑุญูุฉ ุงูุฅูุชุงุฌ.
ุชู ุฅุนุฏุงุฏ ูุฐุง ุงููุฑุฌุน ููุดุฑุญ ูู ูููุ ูู ุชูููุฉุ ููู ุณุทุฑ ููุฏ ุฌููุฑูุ ุจุฃุณููุจ ุชุนูููู ููุตู.

---

## ๐ ุงูููุฑุณ
1.  **ูููููุฉ ุงููุดุฑูุน (Project Architecture)**
2.  **ูููุงุช ุงูุชูููู (Configuration Files)**
    -   package.json
    -   tsconfig.json
    -   vite.config.ts
    -   tailwind.config.js
3.  **ุงูุฎูููุฉ (Backend) - ุดุฑุญ ุชูุตููู**
    -   Database Schema (Prisma)
    -   Server Entry (index.ts)
    -   Authentication & Security
    -   File Upload System
4.  **ุงููุงุฌูุฉ (Frontend) - ุดุฑุญ ุชูุตููู**
    -   Routing (App.tsx)
    -   API Service (services/api.ts)
    -   Reusable Components
    -   Pages Logic
5.  **ุงููุดุฑ (Deployment)**

---

## ๐ ุงููุตู ุงูุฃูู: ูููููุฉ ุงููุดุฑูุน

ุงููุดุฑูุน ูุจูู ุจูุธุงู **Monorepo** (ูุณุชูุฏุน ูุงุญุฏ) ูุฌูุน ุจูู ุงููุงุฌูุฉ ูุงูุฎูููุฉ ูุณูููุฉ ุงูุชุทููุฑ.

```text
/
โโโ .env                # ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ (ุฃุณุฑุงุฑ ุงููุดุฑูุน)
โโโ package.json        # ูุฏูุฑ ุงูุญุฒู ูุงูุณูุฑุจุชุงุช
โโโ server/             # ูุฌูุฏ ุงูุฎุงุฏู (Backend)
โ   โโโ prisma/         # ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โ   โโโ schema.prisma   # ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โ   โโโ dev.db          # ููู ูุงุนุฏุฉ ุงูุจูุงูุงุช (SQLite)
โ   โโโ src/            # ููุฏ ุงูุฎุงุฏู
โ   โ   โโโ index.ts        # ุงููุฏุฎู ุงูุฑุฆูุณู ููุณูุฑูุฑ
โ   โโโ uploads/        # ูุฌูุฏ ุชุฎุฒูู ุงูุตูุฑ ุงููุฑููุนุฉ
โโโ src/                # ููุฏ ุงููุงุฌูุฉ (Frontend)
โ   โโโ components/     # ุงูููููุงุช ุงููุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู (Navbar, Footer...)
โ   โโโ pages/          # ุตูุญุงุช ุงููููุน (Home, Events, Admin...)
โ   โโโ services/       # ุฏูุงู ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ (api.ts)
โ   โโโ types.ts        # ุชุนุฑููุงุช ุงูุฃููุงุน (TypeScript Interfaces)
โ   โโโ index.css       # ุชูุณููุงุช CSS ุงูุนุงูุฉ
โโโ public/             # ุงููููุงุช ุงูุนุงูุฉ (ุงูุตูุฑ ุงูุซุงุจุชุฉุ ุงูุฃููููุงุช)
โโโ dist/               # ุงููุฌูุฏ ุงูููุงุฆู ุจุนุฏ ุงูุจูุงุก (Build Output)
```

---

## โ๏ธ ุงููุตู ุงูุซุงูู: ูููุงุช ุงูุชูููู (Configuration)

### 1. `package.json`
ูุฐุง ุงูููู ูู "ุจุทุงูุฉ ูููุฉ" ุงููุดุฑูุน.

```json
{
  "name": "csa-portal",
  "scripts": {
    "dev": "vite",                   // ุชุดุบูู ูุถุน ุงูุชุทููุฑ (Frontend)
    "build": "vite build",           // ุจูุงุก ุงููุงุฌูุฉ ููุฅูุชุงุฌ (ุชุญููููุง ูู HTML/JS)
    "start": "ts-node server/src/index.ts", // ุชุดุบูู ุงูุณูุฑูุฑ ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ
    "server": "ts-node server/src/index.ts" // ุชุดุบูู ุงูุณูุฑูุฑ ุฃุซูุงุก ุงูุชุทููุฑ
  },
  "dependencies": {
    "react": "^18.2.0",              // ููุชุจุฉ ุงููุงุฌูุฉ
    "express": "^4.18.2",            // ุฅุทุงุฑ ุนูู ุงูุฎุงุฏู
    "@prisma/client": "^5.x",        // ุงูุชุนุงูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
    "multer": "^1.4.5",              // ููุชุจุฉ ุฑูุน ุงููููุงุช
    "bcrypt": "^5.1.1",              // ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
    "jsonwebtoken": "^9.0.2"         // ุฅูุดุงุก ุชูููุงุช ุงูุฏุฎูู (JWT)
  }
}
```

### 2. `tailwind.config.js` (ููุฌูุฏ ุฏุงุฎู index.html ุฃู ููู ูููุตู)
ูุญุฏุฏ ุฃููุงู ุงููููุน ูุงูุฎุทูุท. ูููุง ุจุชุนุฑูู ุฃููุงู "Brand" ุฎุงุตุฉ ุจุงูุฌูุนูุฉ:
```javascript
colors: {
  brand: {
    500: '#0ea5e9', // ุงูููู ุงูุฑุฆูุณู (ุฃุฒุฑู ุณูุงูู)
    600: '#0284c7', // ููู ุฃุบูู ุนูุฏ ุงูุชุญููู (Hover)
    // ...
  }
}
```

---

## ๐ ุงููุตู ุงูุซุงูุซ: ุงูุฎูููุฉ (Backend) - ุงูููุจ ุงููุงุจุถ

ุงูุฎุงุฏู ูุจูู ุจุงุณุชุฎุฏุงู **Node.js** ู **Express**.

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช (`server/prisma/schema.prisma`)
ูุฐุง ุงูููู ูุตู ุดูู ุงูุจูุงูุงุช. ููุฃุฎุฐ ุฌุฏูู "ุงูุฃุฎุจุงุฑ" ููุซุงู:

```prisma
model News {
  id        String   @id @default(uuid())  // ุงููุนุฑู: ูุต ุนุดูุงุฆู ูุฑูุฏ
  title     String                         // ุนููุงู ุงูุฎุจุฑ
  content   String                         // ุชูุงุตูู ุงูุฎุจุฑ
  image     String?                        // ุฑุงุจุท ุงูุตูุฑุฉ (ุนูุงูุฉ ? ุชุนูู ุฃููุง ุงุฎุชูุงุฑูุฉ)
  tags      String?                        // ุงูุชุตูููุงุช (ูุฎุฒููุง ููุต JSON)
  createdAt DateTime @default(now())       // ุชุงุฑูุฎ ุงูุฅูุดุงุก (ุชููุงุฆู)
}
```
**ููุงุฐุง UUIDุ** ุงูุฃุฑูุงู ุงููุชุณูุณูุฉ (1, 2, 3) ูุณูู ุชุฎููููุง ูุงุฎุชุฑุงููุง. ุงูู UUID (ูุซู `a1b2-c3d4...`) ูุณุชุญูู ุงูุชุฎููู.

### 2. ุงูุณูุฑูุฑ ุงูุฑุฆูุณู (`server/src/index.ts`)
ููุญูู ุงูุฃุณุทุฑ ุงูุฃูู:

**ุฅุนุฏุงุฏ ุงูุฃูุงู (Middleware):**
```typescript
app.use(cors());   // ูุณูุญ ูููุงุฌูุฉ (Port 5173) ุจุทูุจ ุจูุงูุงุช ูู ุงูุฎุงุฏู (Port 3001)
app.use(helmet()); // ูุถูู ุชุฑููุณุงุช ุฃูุงู HTTP ูููุน ูุฌูุงุช XSS ูุบูุฑูุง
app.use(express.json()); // ูุณูุญ ููุณูุฑูุฑ ุจูุฑุงุกุฉ ุงูุจูุงูุงุช ุงููุฑุณูุฉ ุจุตูุบุฉ JSON
```

**ูุธุงู ุฑูุน ุงูุตูุฑ (Multer):**
```typescript
// ุชุญุฏูุฏ ููุงู ุงูุญูุธ
const storage = multer.diskStorage({
    destination: (req, file, cb) => cb(null, 'server/uploads/'),
    filename: (req, file, cb) => {
        // ูุบูุฑ ุงุณู ุงูููู ููููู ูุฑูุฏุงู (ุงูููุช ุงูุญุงูู + ุฑูู ุนุดูุงุฆู)
        const uniqueName = Date.now() + '-' + Math.round(Math.random() * 1E9);
        cb(null, uniqueName + path.extname(file.originalname));
    }
});
const upload = multer({ storage });
```
**ููุงุฐุง ูุบูุฑ ุงูุงุณูุ** ูู ูุงู ุดุฎุตุงู ุจุฑูุน ุตูุฑุฉ ุจููุณ ุงูุงุณู (image.jpg)ุ ุงูุซุงููุฉ ุณุชูุณุญ ุงูุฃููู. ุชุบููุฑ ุงูุงุณู ูููุน ุฐูู.

**ููุทุฉ ููุงูุฉ ุงูุฑูุน (Upload Endpoint):**
```typescript
app.post('/api/upload', verifyAnyAuth, upload.single('file'), (req, res) => {
    // ุจุนุฏ ุฃู ูุฑูุน Multer ุงููููุ ูุนูุฏ ุงูุฑุงุจุท ูููุณุชุฎุฏู
    res.json({ url: `http://localhost:3001/uploads/${req.file.filename}` });
});
```
`verifyAnyAuth`: ุฏุงูุฉ ุชุชุฃูุฏ ุฃู ุงููุณุชุฎุฏู "ูุณุคูู" ุฃู "ุนููุฏ" ูุจู ุงูุณูุงุญ ูู ุจุงูุฑูุน.

**ุฎุฏูุฉ ุงููููุงุช ุงูุซุงุจุชุฉ (Static Files):**
```typescript
// ุฌุนู ูุฌูุฏ uploads ุนุงูุงู ูููุตูู ุนุจุฑ ุงูุฑุงุจุท
app.use('/uploads', express.static(path.join(__dirname, '../uploads')));

// ูู ุงูุฅูุชุงุฌ: ุฎุฏูุฉ ูููุงุช ุงููุงุฌูุฉ (React Build)
app.use(express.static(path.join(__dirname, '../../dist')));
```

---

## ๐จ ุงููุตู ุงูุฑุงุจุน: ุงููุงุฌูุฉ (Frontend)

ุงููุงุฌูุฉ ูู ูุง ูุฑุงู ุงููุณุชุฎุฏู.

### 1. ุฎุฏูุฉ ุงูุงุชุตุงู (`services/api.ts`)
ูุฐุง ุงูููู ูู "ุงููุณุท" ุงูุฐู ูุชุญุฏุซ ูุน ุงูุณูุฑูุฑ. ุจุฏูุงู ูู ูุชุงุจุฉ `fetch` ูู ูู ููุงูุ ููุชุจูุง ููุง ูุฑุฉ ูุงุญุฏุฉ.

```typescript
export const api = {
    // ุฅุฏุงุฑุฉ ุงููุญุชูู
    manage: {
        // ุฏุงูุฉ ูุฑูุน ููู
        uploadFile: async (file: File) => {
            const formData = new FormData();
            formData.append('file', file);
            // ูุณุชุฎุฏู fetch ูุฃููุง ูุฑุณู ููู ูููุณ JSON
            const res = await fetch(`${API_URL}/upload`, {
                method: 'POST',
                headers: { 'Authorization': `Bearer ${getToken()}` }, // ุฅุฑุณุงู ููุชุงุญ ุงูุฏุฎูู
                body: formData
            });
            return res.json();
        },
        
        // ุฏุงูุฉ ุฅูุดุงุก ุฎุจุฑ
        createNews: async (newsData) => {
            // ููุง ูุณุชุฎุฏู ุฏุงูุฉ ูุณุงุนุฏุฉ (request) ุชุฑุณู ุงูุจูุงูุงุช ูู JSON
            return request('/news', 'POST', newsData);
        }
    }
}
```

### 2. ุตูุญุฉ ููุญุฉ ุงูุชุญูู (`pages/Admin.tsx`)
ูุฐู ุงูุตูุญุฉ "ุงูุฏููุงููููุฉ" ุงูุฃูุจุฑ ูู ุงููุดุฑูุน.

**ููู ุชุนููุ**
1.  **State (ุงูุญุงูุฉ):** ูุฎุฒู ุงูุฃุฎุจุงุฑ ูุงููุนุงููุงุช ูุงูุฃุนุถุงุก ูู `useState`.
2.  **useEffect:** ุนูุฏ ูุชุญ ุงูุตูุญุฉุ ูุฌูุจ ุงูุจูุงูุงุช ูู `api.manage`.
3.  **Tabs:** ูุณุชุฎุฏู ูุชุบูุฑ `activeTab` ูุชุจุฏูู ุงูุนุฑุถ ุจูู (News, Events, Team).

**ูุซุงู ุนูู ุฑูุน ุงูุตูุฑุฉ ูู ุงููุญุฑุฑ:**
```typescript
const handleFileChange = async (e) => {
    const file = e.target.files[0];
    if (file) {
        setUploading(true); // ุฅุธูุงุฑ ูุคุดุฑ ุงูุชุญููู
        try {
            const response = await api.manage.uploadFile(file);
            // ุจูุฌุฑุฏ ุงูุฑูุนุ ูุญุตู ุนูู ุงูุฑุงุจุท ููุถุนู ูู ุงููููุฐุฌ
            setEditingItem({ ...editingItem, image: response.url });
        } catch (err) {
            alert('ูุดู ุงูุฑูุน!');
        } finally {
            setUploading(false); // ุฅุฎูุงุก ุงููุคุดุฑ
        }
    }
};
```

---

## ๐ ุงููุตู ุงูุฎุงูุณ: ุงููุดุฑ (Deployment)

ููู ูุทูู ุงููููุน ููุนุงููุ

### Docker (ุงูุญุงููุฉ ุงูุณุญุฑูุฉ)
ููุฏ ุฃูุดุฃูุง ููู `Dockerfile` ูุฌูุน ูู ุงููุทุน ูุนุงู.

**ุดุฑุญ ุงูุฃูุงูุฑ ูู Dockerfile:**
1.  `FROM node:20-slim`: ุงุณุชุฎุฏู ูุณุฎุฉ ุฎูููุฉ ูู Node.js.
2.  `COPY package*.json ./`: ุงูุณุฎ ูููุงุช ุงูุชุจุนูุงุช.
3.  `RUN npm ci`: ุซุจุช ุงูููุชุจุงุช.
4.  `COPY . .`: ุงูุณุฎ ููุฏ ุงููุดุฑูุน ุจุงููุงูู.
5.  `RUN npx prisma generate`: ุฌูุฒ ูุงุนุฏุฉ ุงูุจูุงูุงุช.
6.  `RUN npm run build`: ุญูู ููุฏ React ุฅูู HTML/CSS/JS ุฌุงูุฒ.
7.  `CMD ["npm", "start"]`: ุดุบูู ุงูุณูุฑูุฑ.

ุนูุฏ ุงูุชุดุบููุ ุงูุณูุฑูุฑ ุณูููู ุจู:
1.  ุฎุฏูุฉ ุงูู API ุนูู `/api`.
2.  ุฎุฏูุฉ ุงูุตูุฑ ุงููุฑููุนุฉ ุนูู `/uploads`.
3.  ุฃู ุทูุจ ุขุฎุฑ (ูุซู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ `/`) ุณูููู ุจุชุญูููู ุฅูู ููู `index.html` ูู ูุฌูุฏ `dist` (ุงูุฐู ุจูููุงู ูู ุงูุฎุทูุฉ 6).

ุจูุฐุง ูุตุจุญ ูุฏูู "ุชุทุจูู ูุงุญุฏ" (Server + Frontend) ุฐุงุชู ุงูุชุดุบููุ ุฌุงูุฒ ููุนูู ุนูู ุฃู ุงุณุชุถุงูุฉ ูู ุงูุนุงูู.

---

## ๐ ุงูุฎุงุชูุฉ
ุฃูุช ุงูุขู ุชูุชูู ูุธุงูุงู ูุชูุงููุงู:
-   **Frontend:** ุณุฑูุนุ ูุชุฌุงูุจุ ูุฏุงุนู ููุบุฉ ุงูุนุฑุจูุฉ.
-   **Backend:** ุขููุ ููุฏุนู ุฑูุน ุงููููุงุช ุงูุญูููู.
-   **Database:** ูุญููุธุฉ ูุญููุงู ูุณููุฉ ุงูููู.
-   **DevOps:** ุฌุงูุฒ ูููุดุฑ ุนุจุฑ Docker.

ูุฐุง ุงููุดุฑูุน ูู ุงูุฃุณุงุณ ุงููุชูู ูุฃู ููุตุฉ ุฅุฏุงุฑุฉ ูุญุชูู ุชุฑูุฏ ุจูุงุกูุง ูุณุชูุจูุงู.
